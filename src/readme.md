# Итоговая аттестация

## Задание

### Написать свой тестовый фреймворк, применив знания, полученные в ходе обучения. Фреймворк должен включать в себя:

 - Работу с DB
 - Работу с API
 - Работу с WEB
 - Отчеты Allure
 - Написанный рабочий pipeline для запуска АТ (GitHub-actions/Jenkins) 

## Веб-ресурсы

 - _API Swagger: https://x-clients-be.onrender.com/docs/#/_
 - _API URL: https://x-clients-be.onrender.com_
 - _WEB URL: https://www.saucedemo.com/_


## Используемые инструменты

1) ` Allure `- инструмент для создания красочных и интерактивных отчетов о результатах тестирования, поддерживающий интеграцию с различными инструментами автоматизации

2) ` GitHubAction ` - инструмент автоматизации рабочих процессов, позволяющий создавать CI/CD-пайплайны для автоматической проверки, сборки и развертывания кода непосредственно в репозиториях GitHub

3) ` JDBC ` - инструмент для выполнения SQL-запросов и работы с базами данных непосредственно в рамках автоматизированных процессов, позволяющий выполнять операции, такие как чтение, запись и обновление данных

4) ` JUnit5 ` - популярный фреймворк для модульного тестирования в Java, обеспечивающий аннотации и инструменты для создания и выполнения тестов

5)  ` Maven ` - инструмент управления проектами и автоматизации сборки для Java, который облегчает процесс зависимости, компиляции, тестирования и упаковки приложений, обеспечивая упорядоченную структуру и стандарты

6) ` RestAssured ` - библиотека для тестирования RESTful веб-сервисов на Java, которая предоставляет удобный и читаемый синтаксис для выполнения HTTP-запросов и валидации ответов

7) ` Selenide ` - Java-библиотека для автоматизации веб-тестирования, которая упрощает написание и поддержку тестов благодаря интуитивно понятному синтаксису и встроенным ожиданиям

## Краткое описание структуры 

- Работа с DB организована в ` src/main/java/example.db `:

    - Класс ` DBConnect ` - необходим для описания настроек подключения к БД
    - Класс ` EmployeeDao ` - необходим для описания методов работы непосредственно внутри самой БД
    - Класс ` DbQuery ` - в нем представлены два запроса к бд (демонстрируют работоспособность JDBC)
    - Директория `resources ` - в ней находятся данные для подключения к БД (в данном случае: url,user,password)

- Работа с API и WEB организована в ` src/test/java/ `:

    - Директория ` api ` - содержит тестовые api-классы, написанные при использованни RestAssured
    - Директория ` configs ` - содержит конфигурационные классы, используемые в автотестах
    - Директория ` page_object ` - содержит "гибкие" классы с объектами и методами для страниц, используемые в ui-автотестах
    - Директория ` ui ` - содержит тестовые ui-классы, написанные при использованни Selenide
    - Директория ` utils ` - содержит классы включающие в себя различные методы для работы с эндопоинтами в API-тестах
    - Директория `resources ` - в ней находятся ресурсные данные, необходимые для прогона автотестов

- Работа с отчетностью организована при помощи Allure Reports (подробное описание см. ниже)

- Pipeline для запуска автотестов в GitHub Action описан в файле ` maven.yml ` расположенном в корне проекта, в директории `.github/workflows `

Pipeline запускается автоматически при каждом новом коммите в любую из веток репозитория 

## Управление конфигурацией браузера

По-умолчанию, браузер в тестах запускается в headless режиме.
Чтобы браузер отображался во время тестов необходимо изменить значение headless с true на false в классе SelenideConfig.java, расположенном в директории configs. 
Там же можно выбрать браузер, определить pageLoadStrategy и timeout для Selenide.

## Запуск прогона тестов

Запуск тестов через консоль IDE осуществляется посредством использования нижеуказанных команд.   

- Для запуска всех тестов использовать команду:

```

mvn clean test  

```

- Для запуска api-тестов использовать команду:

```

mvn test -Dgroups="api"
 
```

- Для запуска ui-тестов использовать команду:

```

mvn test -Dgroups="ui"

```

## Формирование Allure-отчета после прогона тестов и его просмотр

Для того, чтобы сформировать Allure-отчет после прогона тестов, необходимо предварительно установить на локальном компьютере allure, а затем выполнить в консоли IDE следующую команду:

```

allure serve

```
В открывшемся отчете перейти в нужную вкладку, например "Behaviors". В ней отображаются подробные "читаемые" отчеты прогнанных тестов.
